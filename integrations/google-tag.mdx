---
title: Google Tag (gtag.js)
description: Learn how to use Google Tag (gtag.js) with c15t.
lastModified: 2025-09-24
canary: true
---

Google Tag (gtag.js) is used to send data to various Google products like Analytics, Ads & Floodlight.
Based on the product you are using you should set the category to `marketing` (Ads & Floodlight) or `measurement` (Analytics).

By default, c15t will always load this script regardless of consent. This is because Google Tag manages its own consent state via Google Consent Mode v2.

c15t will automatically sync the consent state so you don't need to do anything extra.

## Implementation

<Steps>
  <Step>
    ### Adding the script to c15t

    <Tabs items={['JavaScript', 'React', 'Next.js + App Router', 'Next.js + Pages Router']}>
      <Tab value="JavaScript">
        ```ts
        import { configureConsentManager } from 'c15t';
        import { gtag } from '@c15t/scripts/google-tag';

        configureConsentManager({
          // ... 
          scripts: [
            gtag({
              id: 'G-XXXXXXXXXX',
              category: 'marketing',
            }),
          ],
        });
        ```
      </Tab>

      <Tab value="React">
        ```tsx
        import { gtag } from '@c15t/scripts/google-tag';
        import { ConsentManagerProvider } from '@c15t/react';

        export function App({ children }: { children: React.ReactNode }) { 
          return (
            <ConsentManagerProvider
              options={{
                scripts: [
                  gtag({
                    id: 'G-XXXXXXXXXX',
                  }),
                ],
              }}
            >
              {children}
            </ConsentManagerProvider>
          );
        }
        ```
      </Tab>

      <Tab value="Next.js + App Router">
        ```tsx
        'use client';
        import { gtag } from '@c15t/scripts/google-tag';
        import { ClientSideOptionsProvider } from '@c15t/nextjs/client';

        export function ConsentManagerClient({ children }: { children: React.ReactNode }) { 
          return (
            <ClientSideOptionsProvider
              scripts={[
                gtag({
                  id: 'G-XXXXXXXXXX',
                }),
              ]}
            >
              {children}
            </ClientSideOptionsProvider>
          );
        }
        ```
      </Tab>

      <Tab value="Next.js + Pages Router">
        ```tsx
        import { gtag } from '@c15t/scripts/google-tag';
        import { ConsentManagerProvider } from '@c15t/nextjs';

        export function App() { 
          return (
            <ConsentManagerProvider
              options={{
                // ... other options
                scripts: [
                  gtag({
                    id: 'G-XXXXXXXXXX',
                    category: 'measurement',
                  }),
                ],
              }}
            >
              {children}
            </ConsentManagerProvider>
          );
        }
        ```
      </Tab>
    </Tabs>
  </Step>
</Steps>

## Types

### GtagOptions

<AutoTypeTable path="./packages/scripts/src/google-tag.ts" name="GtagOptions" />

### Script

<AutoTypeTable path="./packages/core/src/libs/script-loader/types.ts" name="Script" />
